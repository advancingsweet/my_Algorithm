

# 知识点

## [1.硬核整数二分视频图解](https://www.bilibili.com/video/BV1d54y1q7k7/?spm_id_from=333.337.search-card.all.click&vd_source=235a1e7b912d1c10826a324e11418122)

## [2.不需要考虑mid+1、mid-1的二分查找模板博文](https://blog.csdn.net/WJPnb1/article/details/126360962?spm=1001.2014.3001.5502)



1. y总的整数二分查找需要对界限进行讨论

2. M = (L + R + 1)/2   向上取整， M = (L + R )/2  向下取整。 必须得向上取整

   ​    因为当 L = R -1时，向下取整，M = L = R -1,则循环陷入死循环

3. ![image-20230105152508549](C:\Users\Hongwei Tang\AppData\Roaming\Typora\typora-user-images\image-20230105152508549.png)

3.整数二分跟实数二分的差别？

![image-20230105152832669](C:\Users\Hongwei Tang\AppData\Roaming\Typora\typora-user-images\image-20230105152832669.png)

实数二分不需要考虑第4步，不需要考虑取整的问题  

4.有单调性的一定可以二分，但能二分的，不一定具有单调性



******

# [790. 数的三次方根](https://www.acwing.com/problem/content/792/) (实数二分查找)

给定一个浮点数 n，求它的三次方根。

#### 输入格式

共一行，包含一个浮点数 n。

#### 输出格式

共一行，包含一个浮点数，表示问题的解。

注意，结果保留 6 位小数。

#### 数据范围

−10000≤n≤10000

#### 输入样例：

```
1000.00
```

#### 输出样例：

```
10.000000
```

## 错误代码：

```C++
#include<iostream>
using namespace std;
int main()
{
    double n,mid;
    cin>>n;
    int l = -10000,r=10000;   //这里应该是  double l = -10000, r = 10000;
    while(r-l>1e-8)
    {
         mid = (l+r)/2;
        if(mid*mid*mid>=n) r = mid;     
        else l = mid;
    }
    cout<<l<<endl;
    return 0;
}
/*
错因：
	1.double 赋值给 int ，会将小数点省去！！！ 所以循环所得结果不可能精准到第八位小数，则陷入死循环
	2.输出：cout输入输出的值是整数，而printf输出double值，默认保留6位小数  printf("%lf",l);
*/

```

## 正解：

```c++
#include<iostream>
using namespace std;
int main()
{
	double n;
	cin>>n;
	double l = -10000,r = 10000;
	while(r-l>1e-8)
	{
		double mid = (l+r)/2;
        if(mid*mid*mid<=n) l = mid;
        else r = mid;
	}
    printf("%lf",l);    //此既可输出l,又可输出r,因为当精确到第八位小数时，l,r的前七位小数已经相同
}
```

******

# [789. 数的范围](https://www.acwing.com/problem/content/791/) （整数二分查找）

给定一个按照升序排列的长度为 n 的整数数组，以及 q 个查询。

对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 00 开始计数）。

如果数组中不存在该元素，则返回 `-1 -1`。

#### 输入格式

第一行包含整数 n 和 q，表示数组长度和询问个数。

第二行包含 n 个整数（均在 1∼100001∼10000 范围内），表示完整数组。

接下来 q 行，每行包含一个整数 k，表示一个询问元素。

#### 输出格式

共 q 行，每行包含两个整数，表示所求元素的起始位置和终止位置。

如果数组中不存在该元素，则返回 `-1 -1`。

#### 数据范围

1≤n≤100000
1≤q≤10000
1≤k≤10000

#### 输入样例：

```
6 3
1 2 2 3 3 4
3
4
5
```

#### 输出样例：

```
3 4
5 5
-1 -1
```

## 正解：

```c++
#include<iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>

using namespace std;

const int N = 100010;
int val[N],K[N];

int main()
{
    int n,k;
    cin>>n>>k;
    for(int i=0;i<n;i++) scanf("%d",&val[i]);
    for(int i=0;i<k;i++) scanf("%d",&K[i]);
    /*
    输入方式也可以是
    while(k--)
    {
    	int x;
    	cin>>x;
    	--------
    }
    */
   for(int i=0;i<k;i++)                           
    {
        int l = -1,r = n;
        while(l+1!=r)
        {
            int mid = (l+r)/2;
            if(val[mid]>=K[i]) r = mid;
            else l = mid;
        }
        
        if(val[r]==K[i])  //上一层while循环退出，l + 1 =r;
        {
            cout<<r<<" ";
            r = n;
            while(l+1!=r){
                int mid = l+r>>1;
                if(val[mid]<=K[i]) l = mid;
                else r = mid;
            }
            cout<<l<<endl;
        }
        else cout<<"-1 -1"<<endl;
    }
}

/* 
此种整数二分查找，详见  知识点 1.硬核整数二分视频图解
*/
```

[硬核整数二分视频图解](https://www.bilibili.com/video/BV1d54y1q7k7/?spm_id_from=333.337.search-card.all.click&vd_source=235a1e7b912d1c10826a324e11418122)

*********

# 二分查找小总结

## 1.实数二分查找

```C++
// 实数二分查找模板：
double x; cin>>x;
double l = -1000, r = 1000;    // 数据范围：[-1000,1000]
while(r-l>1e-6){              //精度根据题目要求进行确定
    double mid = (l+r)/2;      // 因为 l,r均为double，所以这里并非整除，而是正常的实数除法
    if( ) ;                    //根据题干要求再放入条件
    else ;
}
// 此输出的 l,r为对应的值
```

在连续的实数范围内查找：如[10,1000]的连续范围内查找某个数。所以查找时数据类型应该定义为 double 类型，而不是 int 类型

## 2.整数二分查找

```C++
// 整数二分查找模板（此模板可以省略对界限的讨论）：
int x; cin>>x;
int l = -1, r = n;	
while(l+1!=r)                      
{
    int mid = l + r >> 1;		   // 永远记住： l <= mid <= r
    if(value[mid]>=x) r = mid;     //最终结果： 取r，则为第一个>=x 的值的位置。 取 l，则为第一个 <x 的值的位置
    else l = mid;
}
// 此输出的 l,r为对应的位置，并非数值
```

